# AI语音助手桌面宠物

## 项目概述

这是一个基于Python开发的智能语音助手桌面宠物应用，集成了Live2D模型展示、语音识别、文本生成和语音合成等功能。该助手能够通过语音与用户交互，并支持本地和云端模型配置，具备Agent能力和记忆功能。

## 核心特性

- Live2D模型展示
  - 支持VTuberStudio模型文件格式
  - 根据对话情感自动切换表情
  - 自定义右键菜单系统
  - 支持鼠标滚轮缩放模型
  - 平滑的缩放动画效果

- 交互界面
  - 自适应输入框高度
  - 输入框与模型联动
  - 美观的UI设计
  - 优化的菜单样式

- 语音系统
  - 语音识别(ASR)：支持SenseVoice本地模型
  - 文本生成(LLM)：支持Ollama本地模型和DeepSeek API
  - 语音合成(TTS)：支持GPT-SoVITS本地模型

- 智能功能
  - Agent能力：支持执行计算机操作
  - 记忆系统：短期和长期记忆存储
  - 多模型支持：可配置本地/云端模型

## 技术架构

### 前端部分
- PyQt5/PySide6：桌面应用界面
- Live2D SDK：模型渲染和动画控制
- 自定义右键菜单系统
- 自适应UI组件

### 后端部分
- FastAPI：API服务
- ASR模块：
  - SenseVoice：本地语音识别
  - 可选云端API（阿里云、百度等）
- LLM模块：
  - Ollama：本地大模型
  - DeepSeek API：云端模型
- TTS模块：
  - GPT-SoVITS：本地语音合成
  - 可选云端TTS服务
- 记忆系统：
  - SQLite/Redis：对话历史存储
  - 向量数据库：长期记忆存储

### Agent系统
- 操作系统API集成
- 权限管理系统
- 任务执行引擎

## 实现步骤

### 1. 基础框架搭建
- [x] 创建项目结构
- [x] 设置开发环境
- [x] 配置依赖管理

### 2. Live2D展示系统
- [x] 集成Live2D SDK
  - 成功集成Live2D Cubism SDK
  - 实现模型加载和初始化
  - 支持.model3.json格式模型文件
- [x] 实现模型加载和渲染
  - 实现模型渲染和动画控制
  - 支持模型拖动和位置调整
  - 实现眼睛跟随鼠标功能
  - 支持物理效果和动作更新
- [TODO] 开发表情切换系统
  - 实现表情文件加载和切换
  - 支持.exp3.json格式表情文件
  - 实现表情参数重置和状态保持
  - 添加表情配置管理
- [x] 自定义右键菜单系统
  - 实现眼睛追随开关
  - 添加点击区域控制（显示/隐藏、大小调整）
  - 实现表情切换菜单
  - 支持点击区域自动居中
  - 优化拖动区域与点击区域联动
- [x] 实现模型缩放功能
  - 支持鼠标滚轮缩放
  - 实现平滑的缩放动画
  - 优化缩放时的输入框位置
  - 保持模型中心点不变
  - 限制最大/最小缩放比例

### 3. 交互界面开发
- [x] 实现输入框系统
  - 创建自适应高度的输入框
  - 根据文本长度动态调整高度
  - 限制最大高度
  - 优化输入框样式
- [x] 实现输入框与模型联动
  - 输入框跟随模型移动
  - 输入框跟随模型缩放
  - 保持输入框在模型底部居中
  - 确保输入框始终在最顶层
- [x] 优化菜单样式
  - 统一菜单外观
  - 移除选中项高亮显示
  - 优化菜单项间距
  - 添加半透明背景
- [x] 实现窗口关闭功能
  - 同时关闭模型和输入框
  - 添加关闭信号机制
  - 优化关闭流程

### 4. 语音系统开发
- [x] 实现语音录制和识别
  - 实现基础录音功能
  - 添加音量可视化显示
  - 集成WebRTC VAD进行语音检测
  - 支持WAV格式音频保存
  - 实现多线程录音处理
- [ ] 集成SenceVoice
- [ ] 开发TTS系统

### 5. LLM集成
- [ ] 配置本地Ollama
- [ ] 集成DeepSeek API
- [ ] 开发对话管理

### 6. 记忆系统开发
- [ ] 实现对话历史存储
- [ ] 开发向量数据库集成
- [ ] 实现记忆检索功能

### 7. Agent功能开发
- [ ] 实现系统操作API
- [ ] 开发任务执行引擎
- [ ] 实现权限控制

### 8. 系统集成和优化
- [ ] 整合所有模块
- [ ] 优化性能
- [ ] 添加错误处理
- [ ] 完善文档

## 开发环境要求

- Python 3.8+
- PyQt5/PySide6
- Live2D SDK
- SenseVoice
- Ollama
- GPT-SoVITS
- FastAPI
- SQLite/Redis
- 向量数据库

## 安装说明

（待补充）

## 使用说明

### 基本操作
- 左键拖动：移动模型
- 右键点击：打开菜单
- 鼠标滚轮：缩放模型
- 输入框：输入文本与模型交互

### 菜单功能
- 眼睛追随：开启/关闭眼睛跟随鼠标
- 点击区域：调整可点击区域的大小和显示
- 表情控制：切换模型表情
- 关闭：关闭应用

## 贡献指南

欢迎提交Issue或Pull Request！让我们一起将这个项目变得更强大！

## 许可证

本项目采用GPLv3.0许可证，详情请参阅 LICENSE 文件。 